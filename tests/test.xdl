namespace EEE;

struct Item
{
    string      uid;
    string      type;
    time        from_date;
    time        to_date;
    blob        ical;
}

struct Calendar
{
    string      uid;
    time        create_date;
    blob        ical;
    array<array<Item>> items;
}

struct User
{
    string          uid;
    time            create_date;
    blob            ical;
    Calendar        maincal;
    array<Calendar> calendars;
}

servlet Client
{
    struct Date
    {
      int day;
      int month;
      int year;
      int weekday;
    }
    struct Time
    {
      int hour;
      int minute;
    }

    /** Get user data.
     *
     * @param name Name of the user.
     * @return User struct.
     */
    struct DateTime
    {
      Date date;
      Time time;
    }

    DateTime getTime();
    
    /** Get user data.
     *
     * @param name Name of the user.
     * @return User struct.
     */
    User getUserData(string name)
    <%
        printf("User data set!\n");
    %>

    boolean setUserData(User data)
    <%
        printf("User data set!\n");
    %>

    __attrs__
    <%
        char* username;
    %>
    
    __init__
    <%
        printf("Init!\n");
    %>

    __fini__
    <%
        printf("Fini!\n");
    %>
}

servlet Server
{
    boolean auth(string username, string password);
    array<boolean> getList();
    array<array<boolean>> getListList();
    boolean setList(array<User> list);
}
